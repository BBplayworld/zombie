# ğŸ® Zombie MMORPG - ê¸°ìˆ  ë¬¸ì„œ

## ì•„í‚¤í…ì²˜ ê°œìš”

### ì‹œìŠ¤í…œ êµ¬ì„±ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          GameCanvas.vue                  â”‚  â† UI ë ˆì´ì–´
â”‚    (ë¡œë”©/ì‹œì‘/ì¼ì‹œì •ì§€ í™”ë©´)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       GameEngine (useGameEngine.ts)      â”‚  â† ê²Œì„ ë£¨í”„ & í†µí•©
â”‚  - ì´ˆê¸°í™”, ì—…ë°ì´íŠ¸, ë Œë”ë§              â”‚
â””â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 â”‚        â”‚         â”‚         â”‚
 â–¼        â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Playerâ”‚Cameraâ”‚TileMap  â”‚Input      â”‚  â† í•µì‹¬ ì‹œìŠ¤í…œ
â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## í•µì‹¬ ê¸°ëŠ¥ ì„¤ëª…

### 1. ë¬´í•œ íƒ€ì¼ ìŠ¤í¬ë¡¤ë§ ì‹œìŠ¤í…œ

**ë¬¸ì œ**: ë¬´í•œí•œ ì›”ë“œë¥¼ ì–´ë–»ê²Œ íš¨ìœ¨ì ìœ¼ë¡œ ë Œë”ë§í•  ê²ƒì¸ê°€?

**í•´ê²°ì±…**: ë™ì  íƒ€ì¼ ìƒì„± + ì¹´ë©”ë¼ ì»¬ë§

```typescript
// useTileMap.tsì˜ í•µì‹¬ ë¡œì§
updateVisibleTiles(camera: Camera): void {
  // ì¹´ë©”ë¼ê°€ ë³´ëŠ” ì˜ì—­ë§Œ ê³„ì‚°
  const startTileX = Math.floor(camera.position.x / this.tileSize) - 1
  const startTileY = Math.floor(camera.position.y / this.tileSize) - 1
  const endTileX = Math.ceil((camera.position.x + camera.width) / this.tileSize) + 1
  const endTileY = Math.ceil((camera.position.y + camera.height) / this.tileSize) + 1

  // ë³´ì´ëŠ” íƒ€ì¼ë§Œ ìƒì„± (ë©”ëª¨ë¦¬ íš¨ìœ¨ì )
  for (let tileY = startTileY; tileY < endTileY; tileY++) {
    for (let tileX = startTileX; tileX < endTileX; tileX++) {
      // íƒ€ì¼ ìƒì„±
    }
  }
}
```

**ì¥ì **:
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¼ì • (í™”ë©´ì— ë³´ì´ëŠ” íƒ€ì¼ë§Œ ì¡´ì¬)
- ë¬´í•œíˆ í™•ì¥ ê°€ëŠ¥í•œ ì›”ë“œ
- 60 FPS ìœ ì§€

### 2. ì²´ì»¤ë³´ë“œ íŒ¨í„´ íƒ€ì¼ë§

**ë¬¸ì œ**: bg1, bg2 íƒ€ì¼ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ë³µí•˜ë ¤ë©´?

**í•´ê²°ì±…**: ëª¨ë“ˆë¡œ ì—°ì‚°ì„ ì‚¬ìš©í•œ íŒ¨í„´ ë§µí•‘

```typescript
private getTileImageKey(tileX: number, tileY: number): string {
  const pattern = [
    ['bg1', 'bg2'],
    ['bg2', 'bg1']
  ]
  
  // ìŒìˆ˜ ì¢Œí‘œë„ ì²˜ë¦¬ (ë¬´í•œ ì›”ë“œ)
  const y = ((tileY % 2) + 2) % 2
  const x = ((tileX % 2) + 2) % 2
  
  return pattern[y][x]
}
```

**ê²°ê³¼**: 
- ì–´ëŠ ë°©í–¥ìœ¼ë¡œ ê°€ë„ ìì—°ìŠ¤ëŸ¬ìš´ íƒ€ì¼ ì—°ê²°
- ìŒìˆ˜ ì¢Œí‘œì—ì„œë„ ì •ìƒ ì‘ë™

### 3. ë¶€ë“œëŸ¬ìš´ ì¹´ë©”ë¼ ì¶”ì 

**ë¬¸ì œ**: í”Œë ˆì´ì–´ë¥¼ ë”°ë¼ê°€ëŠ” ì¹´ë©”ë¼ê°€ ë„ˆë¬´ ë”±ë”±í•˜ë©´?

**í•´ê²°ì±…**: ì„ í˜• ë³´ê°„(Linear Interpolation)

```typescript
follow(target: { x: number, y: number }): void {
  this.targetPosition.x = target.x - this.width / 2
  this.targetPosition.y = target.y - this.height / 2

  // ë¶€ë“œëŸ¬ìš´ ì´ë™ (smoothing = 0.1)
  this.position.x += (this.targetPosition.x - this.position.x) * 0.1
  this.position.y += (this.targetPosition.y - this.position.y) * 0.1
}
```

**íš¨ê³¼**: 
- ìì—°ìŠ¤ëŸ¬ìš´ ì¹´ë©”ë¼ ì›€ì§ì„
- í”Œë ˆì´ì–´ ê¸‰ì •ì§€ ì‹œì—ë„ ë¶€ë“œëŸ½ê²Œ ë©ˆì¶¤

### 4. ì •ê·œí™”ëœ ëŒ€ê°ì„  ì´ë™

**ë¬¸ì œ**: ëŒ€ê°ì„  ì´ë™ ì‹œ ì†ë„ê°€ âˆš2ë°° ë¹¨ë¼ì§

**í•´ê²°ì±…**: ë²¡í„° ì •ê·œí™”

```typescript
move(moveX: number, moveY: number): void {
  // ë²¡í„° í¬ê¸° ê³„ì‚°
  const magnitude = Math.sqrt(moveX * moveX + moveY * moveY)
  
  if (magnitude > 0) {
    // ì •ê·œí™” (ë‹¨ìœ„ ë²¡í„°ë¡œ ë³€í™˜)
    moveX /= magnitude
    moveY /= magnitude
  }
  
  this.velocity.x = moveX * this.speed
  this.velocity.y = moveY * this.speed
}
```

**ê²°ê³¼**: ëª¨ë“  ë°©í–¥ì—ì„œ ë™ì¼í•œ ì†ë„

### 5. ë Œë”ë§ ìµœì í™”

**ê¸°ë²•ë“¤**:

1. **ì¹´ë©”ë¼ ì»¬ë§**: í™”ë©´ ë°– ê°ì²´ëŠ” ë Œë”ë§ ì•ˆ í•¨
2. **ë™ì  íƒ€ì¼ ìƒì„±**: í•„ìš”í•œ íƒ€ì¼ë§Œ ë©”ëª¨ë¦¬ì— ìœ ì§€
3. **requestAnimationFrame**: ë¸Œë¼ìš°ì € ìµœì í™” í™œìš©
4. **Canvas í´ë¦¬ì–´**: ë§¤ í”„ë ˆì„ ì „ì²´ í™”ë©´ë§Œ í´ë¦¬ì–´

### 6. ê²Œì„ ë£¨í”„ êµ¬ì¡°

```typescript
private gameLoop = (currentTime: number): void => {
  // 1. Delta time ê³„ì‚° (í”„ë ˆì„ ë…ë¦½ì  ì›€ì§ì„)
  this.deltaTime = (currentTime - this.lastFrameTime) / 1000

  // 2. ì…ë ¥ ì²˜ë¦¬
  const input = this.inputManager.getMovementInput()
  
  // 3. ê²Œì„ ë¡œì§ ì—…ë°ì´íŠ¸
  this.player.move(input.x, input.y)
  this.player.update()
  
  // 4. ì¹´ë©”ë¼ ì—…ë°ì´íŠ¸
  this.camera.follow(this.player.position)
  
  // 5. íƒ€ì¼ë§µ ì—…ë°ì´íŠ¸
  this.tileMap.updateVisibleTiles(this.camera)
  
  // 6. ë Œë”ë§
  this.render()
  
  // 7. ë‹¤ìŒ í”„ë ˆì„ ì˜ˆì•½
  requestAnimationFrame(this.gameLoop)
}
```

## ì„±ëŠ¥ ì§€í‘œ

ì˜ˆìƒ ì„±ëŠ¥ (ì¼ë°˜ì ì¸ PC ê¸°ì¤€):

- **FPS**: 60 FPS (vsync)
- **ë©”ëª¨ë¦¬**: ~50MB (íƒ€ì¼ 20ê°œ ê¸°ì¤€)
- **ë Œë”ë§ ì‹œê°„**: ~5-10ms/í”„ë ˆì„
- **íƒ€ì¼ ìƒì„± ì‹œê°„**: ~1ms

## í™•ì¥ ê°€ëŠ¥ì„±

### ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥:

1. **ì—”í‹°í‹° ì‹œìŠ¤í…œ**
   - `useEntity.ts` ìƒì„±
   - GameEngineì— entities ë°°ì—´ ì¶”ê°€
   - ë Œë”ë§ ë£¨í”„ì— ì—”í‹°í‹° ê·¸ë¦¬ê¸° ì¶”ê°€

2. **ì¶©ëŒ ê°ì§€**
   - `useCollision.ts` ìƒì„±
   - AABB (Axis-Aligned Bounding Box) êµ¬í˜„
   - íƒ€ì¼ë§µì— ì¶©ëŒ ë ˆì´ì–´ ì¶”ê°€

3. **ì• ë‹ˆë©”ì´ì…˜ ì‹œìŠ¤í…œ**
   - `useAnimation.ts` ìƒì„±
   - ìŠ¤í”„ë¼ì´íŠ¸ ì‹œíŠ¸ ì§€ì›
   - í”„ë ˆì„ ê¸°ë°˜ ì• ë‹ˆë©”ì´ì…˜

4. **íŒŒí‹°í´ ì‹œìŠ¤í…œ**
   - `useParticle.ts` ìƒì„±
   - íŒŒí‹°í´ í’€ë§
   - ë‹¤ì–‘í•œ ì´í™íŠ¸ (ë¶ˆ, ì—°ê¸°, í”¼ ë“±)

5. **ë©€í‹°í”Œë ˆì´ì–´**
   - WebSocket í†µí•©
   - ì„œë²„ ê¶Œìœ„ ë°©ì‹
   - ì˜ˆì¸¡/ë³´ê°„ ì‹œìŠ¤í…œ

## ì½”ë“œ ì»¨ë²¤ì…˜

- **Composables**: `use{SystemName}.ts` í˜•ì‹
- **í´ë˜ìŠ¤**: PascalCase (ì˜ˆ: `GameEngine`, `Player`)
- **ë©”ì„œë“œ**: camelCase (ì˜ˆ: `updateVisibleTiles`)
- **íƒ€ì…**: ëª…ì‹œì  íƒ€ì… ì„ ì–¸ ì„ í˜¸
- **ì£¼ì„**: JSDoc ìŠ¤íƒ€ì¼

## ë””ë²„ê¹… íŒ

1. **FPS ëª¨ë‹ˆí„°ë§**: í™”ë©´ ì¢Œì¸¡ ìƒë‹¨ì— ì‹¤ì‹œê°„ í‘œì‹œ
2. **ì¢Œí‘œ í™•ì¸**: í”Œë ˆì´ì–´/ì¹´ë©”ë¼ ìœ„ì¹˜ í‘œì‹œ
3. **íƒ€ì¼ ì¢Œí‘œ**: Fallback ë Œë”ë§ ì‹œ íƒ€ì¼ ì¢Œí‘œ í‘œì‹œ
4. **ë¸Œë¼ìš°ì € ì½˜ì†”**: ë¦¬ì†ŒìŠ¤ ë¡œë”© ìƒíƒœ í™•ì¸

## ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

1. âœ… í•­ìƒ Delta Time ì‚¬ìš© (í”„ë ˆì„ ë…ë¦½ì  ì›€ì§ì„)
2. âœ… ë²¡í„° ì •ê·œí™” (ì¼ê´€ëœ ì†ë„)
3. âœ… ì¹´ë©”ë¼ ì»¬ë§ (ì„±ëŠ¥ ìµœì í™”)
4. âœ… ë¦¬ì†ŒìŠ¤ ë¡œë”© ì—ëŸ¬ í•¸ë“¤ë§
5. âœ… TypeScript íƒ€ì… ì•ˆì •ì„±
6. âœ… ëª…í™•í•œ ìƒíƒœ ê´€ë¦¬ (loading â†’ ready â†’ playing)

---

**Made with â¤ï¸ using modern Canvas techniques**
